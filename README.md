# OIS‚ÄëGPT

–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤–æ–π –æ—Ç—Ä–∞—Å–ª–∏.  
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Streamlit** –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, **LangGraph** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –¥–∏–∞–ª–æ–≥–æ–≤ –∏ **LLM**‚Äë–º–æ–¥–µ–ª—å (`unsloth/phi-4-unsloth-bnb-4bit`) –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ –∏ Python‚Äë–∫–æ–¥–∞ –∞–Ω–∞–ª–∏–∑–∞.  
–î–∞–Ω–Ω—ã–µ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ **Elasticsearch** –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã—Ö Excel‚Äë—Ñ–∞–π–ª–æ–≤, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∏—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `matplotlib`/`plotly`.

---

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ü§ñ –ß–∞—Ç‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å AI‚Äë–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º  
- üìã –ê–Ω–∞–ª–∏–∑ —á–µ—Ç—ã—Ä—ë—Ö —Ç–∏–ø–æ–≤ –æ—Ç—á—ë—Ç–æ–≤:  
  - –ø–ª–∞–Ω—ã —Ä–∞–±–æ—Ç  
  - —à–∞—Ö–º–∞—Ç–∫–∞ –±—É—Ä–µ–Ω–∏—è  
  - –∑–∞–º–µ—Ä–Ω–∞—è –¥–æ–±—ã—á–∞  
  - —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≥–∞–∑–∞  
- üß† –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –∞–Ω–∞–ª–∏–∑–∞ (`pandas`, `matplotlib`)  
- üìä –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –≤—ã–≤–æ–¥ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤  
- üìö –ü–æ–∏—Å–∫ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏  
- üìë –û—á–µ—Ä–µ–¥—å —Ñ–æ–Ω–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ Streamlit
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ constants.py       # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # TypedDict/–¥–∞—Ç–∞–∫–ª–∞—Å—Å—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ graph/             # –£–∑–ª—ã LangGraph –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ workflow
‚îÇ   ‚îú‚îÄ‚îÄ services/          # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å AI, –¥–∞–Ω–Ω—ã–º–∏, –ø–æ–∏—Å–∫–æ–º, –æ—á–µ—Ä–µ–¥—å—é
‚îÇ   ‚îú‚îÄ‚îÄ ui/                # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —É—Ç–∏–ª–∏—Ç—ã Streamlit‚Äë–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils/             # –ó–∞–≥—Ä—É–∑—á–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ Dockerfile
```

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker

```bash
docker build -t ois-gpt .
docker run --gpus all -p 8501:8501 ois-gpt
```

### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
pip install -r requirements.txt
streamlit run main.py
```

> **–í–∞–∂–Ω–æ:** –º–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ GPU (`device_map="cuda"`), —É–±–µ–¥–∏—Ç–µ—Å—å –≤ –Ω–∞–ª–∏—á–∏–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π –≤–∏–¥–µ–æ–∫–∞—Ä—Ç—ã –∏ –¥—Ä–∞–π–≤–µ—Ä–æ–≤.

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `config.py`):

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                    | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é                       |
|------------------|-----------------------------------------------|---------------------------------------------|
| `ES_HOST`        | –∞–¥—Ä–µ—Å Elasticsearch                           | `http://vps-ml01.ois.ru:9200`               |
| `ES_INDEX`       | –∏–Ω–¥–µ–∫—Å –æ—Ç—á—ë—Ç–æ–≤                                | `oil-well-reports`                          |
| `DOC_INDEX`      | –∏–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏                           | `belaruss-guide-index`                      |
| `MODEL_PATH`     | –ø—É—Ç—å/–∏–º—è LLM‚Äë–º–æ–¥–µ–ª–∏                           | `unsloth/phi-4-unsloth-bnb-4bit`            |
| `MODEL_CACHE_DIR`| –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∫—ç—à–∞ –º–æ–¥–µ–ª–µ–π                       | `/home/ois.ru/mvprokhorova/models`          |
| `MAX_NEW_TOKENS` | –º–∞–∫—Å–∏–º—É–º —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏                | `10000`                                     |
| `TEMPERATURE`    | ¬´—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞¬ª –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏                       | `0.0`                                       |

–ó–∞–¥–∞–π—Ç–µ –∏—Ö —á–µ—Ä–µ–∑ `.env` –∏–ª–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:

```bash
export ES_HOST=http://localhost:9200
export MODEL_PATH=your/model
```

---

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (`streamlit run main.py` –∏–ª–∏ Docker).
2. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8501`.
3. –í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å –≤ —á–∞—Ç–µ:
   - –æ–±—â–∏–π –≤–æ–ø—Ä–æ—Å ‚Äî –ø–æ–ª—É—á–∏—Ç–µ –æ—Ç–≤–µ—Ç —Å—Ä–∞–∑—É;
   - –∑–∞–ø—Ä–æ—Å –∞–Ω–∞–ª–∏–∑–∞ ‚Äî –≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç—á—ë—Ç–æ–≤, –∑–∞—Ç–µ–º –º–æ–¥–µ–ª—å —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥, –≤—ã–ø–æ–ª–Ω–∏—Ç –∞–Ω–∞–ª–∏–∑ –∏ –ø–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã;
   - –∑–∞–ø—Ä–æ—Å –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî –±—É–¥–µ—Ç –ø—Ä–æ–≤–µ–¥—ë–Ω –ø–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π –∏ –≤—ã–≤–æ–¥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤.
4. –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞, –∫–æ–¥ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Å–ª–æ–≤–∏—è—Ö, —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤–ª–∞–¥–µ–ª—å—Ü–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

